<!-- オーバーレイ（展開時のみ表示） -->
<div *ngIf="isExpanded" class="panel-overlay" (click)="onOverlayClick()"></div>

<!-- サイドアクションパネルコンテナ -->
<div class="side-panel-container">
  <!-- 展開されたアクションメニュー -->
  <div class="action-menu" [class.expanded]="isExpanded">
    <!-- アクションボタン群 -->
    <div class="action-buttons">
      <!-- ビューの編集ページ -->
      <button
        class="action-button view-edit"
        (click)="onViewEditClick()"
        title="ビューの編集"
      >
        <span class="icon">⚙</span>
      </button>

      <!-- ログダイアログの展開 -->
      <button
        class="action-button log-dialog"
        (click)="onLogDialogClick()"
        title="ログダイアログ"
      >
        <span class="icon">≡</span>
      </button>

      <!-- 今日の日付までジャンプ -->
      <button
        class="action-button jump-today"
        (click)="onJumpTodayClick()"
        title="今日の日付へジャンプ"
      >
        <span class="icon">◉</span>
      </button>

      <!-- テーマ切り替え -->
      <button
        class="action-button theme-toggle"
        (click)="onThemeToggleClick()"
        [title]="
          currentTheme === 'dark'
            ? 'ライトモードに切り替え'
            : 'ダークモードに切り替え'
        "
      >
        <span class="icon">{{ currentTheme === "dark" ? "☀" : "☾" }}</span>
      </button>

      <!-- ヘルプガイドページ -->
      <button
        class="action-button help-guide"
        (click)="onHelpGuideClick()"
        title="ヘルプガイド"
      >
        <span class="icon">ⓘ</span>
      </button>
    </div>
  </div>

  <!-- プルボタン（常時表示） -->
  <div
    class="pull-button"
    (click)="onToggleExpansion()"
    [class.expanded]="isExpanded"
  >
    <div class="pull-indicator">
      <div class="pull-arrow" [class.expanded]="isExpanded"></div>
    </div>
  </div>
</div>
